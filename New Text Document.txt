‚úÖ ‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ

net.ipv4.ip_forward = 1 (‡πÄ‡∏õ‡∏¥‡∏î IP Forwarding ‡πÅ‡∏•‡πâ‡∏ß)

WAN = eth0 (‡∏≠‡∏≠‡∏Å‡πÄ‡∏ô‡πá‡∏ï‡∏ú‡πà‡∏≤‡∏ô 192.168.0.1)

Interfaces ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

zteb4kucrc ‚Üí ZeroTier (172.24.0.0/16)

ztklhwkfmx ‚Üí ZeroTier (192.168.192.0/24)

tailscale0 ‚Üí Tailscale (100.64.0.0/10)

üîß iptables NAT + Forward (‡∏ù‡∏±‡πà‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå Exit Node)
WAN_IF="eth0"

# ========== ZeroTier (172.24.0.0/16) ==========
iptables -t nat -A POSTROUTING -o $WAN_IF -s 172.24.0.0/16 -j MASQUERADE
iptables -A FORWARD -i zteb4kucrc -o $WAN_IF -j ACCEPT
iptables -A FORWARD -i $WAN_IF -o zteb4kucrc -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT

# ========== ZeroTier (192.168.192.0/24) ==========
iptables -t nat -A POSTROUTING -o $WAN_IF -s 192.168.192.0/24 -j MASQUERADE
iptables -A FORWARD -i ztklhwkfmx -o $WAN_IF -j ACCEPT
iptables -A FORWARD -i $WAN_IF -o ztklhwkfmx -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT

# ========== Tailscale (100.64.0.0/10) ==========
iptables -t nat -A POSTROUTING -o $WAN_IF -s 100.64.0.0/10 -j MASQUERADE
iptables -A FORWARD -i tailscale0 -o $WAN_IF -j ACCEPT
iptables -A FORWARD -i $WAN_IF -o tailscale0 -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT


‡πÅ‡∏•‡πâ‡∏ß‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ñ‡∏≤‡∏ß‡∏£:

apt install iptables-persistent -y
netfilter-persistent save

üñ•Ô∏è ‡∏ù‡∏±‡πà‡∏á Client
üîπ Tailscale
tailscale up --exit-node=100.101.139.126

üîπ ZeroTier

‡πÄ‡∏Ç‡πâ‡∏≤ my.zerotier.com ‚Üí Network ‚Üí Routes ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏û‡∏¥‡πà‡∏°:

0.0.0.0/0 via 172.24.3.192

0.0.0.0/0 via 192.168.192.123

üéØ ‡∏™‡∏£‡∏∏‡∏õ

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ Client ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏≠‡∏≠‡∏Å‡πÄ‡∏ô‡πá‡∏ï‡∏ú‡πà‡∏≤‡∏ô Tailscale ‡∏´‡∏£‡∏∑‡∏≠ ZeroTier

ZeroTier ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° routing ‡∏´‡∏•‡∏≤‡∏¢ subnet

Tailscale ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö exit-node ‡πÅ‡∏ö‡∏ö personal (‡∏á‡πà‡∏≤‡∏¢, auto)

‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô bash script auto setup (detect WAN interface, ‡πÉ‡∏™‡πà iptables, save rules) ‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡∏£‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à‡∏°‡∏±‡πâ‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö? üî•
